<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8>
		<title>CGI PROJ</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
<!--<script src="C:\\Users\Simone\Documents\GitHub\three.js\build\three.js">-->
	<script src="C:\\Users\Marina\Documents\[SIMONE]\GitHubRepo\three.js\build\three.js">
		</script>
		<script>

        /*GLOBAL CONSTANTS*/
        var WIDTH = window.innerWidth-3;
        var HEIGHT = window.innerHeight-3;
        var COLS = 10;
        var ROWS = 10;
        var STEP = 100;
        var WALLW = 100;
        var WALLH = 100;
        var WALLD = 26;
        var X = -COLS/2 * STEP;
        var Z = -ROWS/2 * STEP;

        /*Basic Initialization*/
        var renderer = new THREE.WebGLRenderer();
        renderer.setSize(WIDTH, HEIGHT);
        renderer.setClearColor(0xdddddd);
        document.body.appendChild(renderer.domElement);

        /*Scene and Camera init*/
        var scene = new THREE.Scene();
        var camera = new THREE.PerspectiveCamera(45, WIDTH/HEIGHT, 1, 10000);
        camera.position.set(0, 1500, 300);
        camera.lookAt(new THREE.Vector3(0,0,0));

        generateRandom = function(){
            var rndSeed = THREE.Math.randInt(1,100);
            if(rndSeed>70){
                return 1;
            }else {
                return 0;
            }
        }

        generateVector4 = function(){
            return new THREE.Vector4(
                generateRandom(),
                generateRandom(),
                generateRandom(),
                generateRandom()
            );
        }

        generateMatrix = function(){
            var matrix = new Array();
            for(i=0; i<ROWS; i++){
                matrix[i] = new Array();
                for(j=0; j<COLS; j++){
                    matrix[i][j] = generateVector4();
                }
            }
            return matrix;
        }

        generatePlane = function(){
            var planeGeom = new THREE.PlaneGeometry(STEP, STEP);
            var planeMat = new THREE.MeshBasicMaterial({color: 0xb60000});
            var plane = new THREE.Mesh(planeGeom, planeMat);
            return plane;
        }

        generateWalls = function(vector, i, j){
            var len = vector.length();
            for(w=0; w<len; w++){
                if(vector[w] = 1){
                    var wallGeom = new THREE.BoxGeometry(WALLW, WALLH, WALLD);
                    var wallMat = new THREE.MeshBasicMaterial({color: 0x00b600});
                    var wall = new THREE.Mesh(wallGeom, wallMat);
                    wall.position.set(  X + (j - Math.sin(w * Math.PI/2)/2) * STEP,
                                        STEP/2,
                                        Z + (i - Math.cos(w * Math.PI/2)/2) * STEP);
                    wall.rotation.set(  0,
                                        w * Math.PI/2,
                                        0);
                    scene.add(wall);
                }
            }
        }

        // adjustMatrix(matrix){
        //     //TODO
        // }

        generateLabyrinth = function(){
            var matrix = generateMatrix();
            // adjustMatrix(matrix);
            for(i=0; i<ROWS; i++){
                for(j=0; j<COLS; j++){
                    var plane = generatePlane();
                    plane.position.set( X + j * STEP,
                                        0,
                                        Z + i * STEP);
                    plane.rotation.x = -Math.PI/2;
                    scene.add(plane);
                    generateWalls(matrix[i][j], i, j);
                }
            }
        }

        generateLabyrinth();

        scene.add(new THREE.AmbientLight(0xffffff));
        renderer.render(scene, camera);

		</script>
	</body>
</html>
